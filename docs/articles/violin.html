<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rempsyc">
<title>Publication-ready violin plots in R • rempsyc</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Publication-ready violin plots in R">
<meta property="og:description" content="rempsyc">
<meta property="og:image" content="https://rempsyc.github.io/rempsyc/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rempsyc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/table.html">APA tables</a>
    <a class="dropdown-item" href="../articles/t-test.html">t tests</a>
    <a class="dropdown-item" href="../articles/contrasts.html">Planned contrasts</a>
    <a class="dropdown-item" href="../articles/moderation.html">Moderations</a>
    <a class="dropdown-item" href="../articles/randomize.html">Randomization</a>
    <a class="dropdown-item" href="../articles/violin.html">Violin plots</a>
    <a class="dropdown-item" href="../articles/scatter.html">Scatter plots</a>
    <a class="dropdown-item" href="../articles/circles.html">Overlapping circles</a>
    <a class="dropdown-item" href="../articles/assumptions.html">Assumptions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../TODOS.html">To-dos</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://remi-theriault.com" aria-label="Author">Author</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/rempsyc" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rempsyc/rempsyc/" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sponsors/rempsyc" aria-label="Donate">
    <span class="fa fa-coffee"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Publication-ready violin plots in R</h1>
                        <h4 data-toc-skip class="author">Rémi
Thériault</h4>
            
            <h4 data-toc-skip class="date">September 6, 2019</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rempsyc/rempsyc/blob/HEAD/vignettes/violin.Rmd" class="external-link"><code>vignettes/violin.Rmd</code></a></small>
      <div class="d-none name"><code>violin.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>I happened to have lots of plots to do with slight variations, so I
made a function to make my life easier.</p>
<p><strong>This function, in particular, serves to compare 2 or more
experimental groups (although it will still plot with 1 group).</strong>
We use violin plots instead of bar plots because they provide more
information for the same space (precisely, the distribution
density/frequency of responses, which allows you to visually estimate
normality, skewness, and kurtosis).</p>
<p>Let’s first load the demo data. This data set comes with base
<code>R</code> (meaning you have it too and can directly type this
command into your <code>R</code> console).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"ToothGrowth"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    len supp dose</span></span>
<span><span class="co">## 1  4.2   VC  0.5</span></span>
<span><span class="co">## 2 11.5   VC  0.5</span></span>
<span><span class="co">## 3  7.3   VC  0.5</span></span>
<span><span class="co">## 4  5.8   VC  0.5</span></span>
<span><span class="co">## 5  6.4   VC  0.5</span></span>
<span><span class="co">## 6 10.0   VC  0.5</span></span></code></pre>
<p>Load the <code>rempsyc</code> package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rempsyc/rempsyc" class="external-link">rempsyc</a></span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong><em>Note:</em></strong> If you haven’t installed this package
yet, you will need to install it via the following command:
<code>devtools::install_github("rempsyc/rempsyc")</code>. Package
<code>devtools</code> is necessary for this command. If you haven’t
installed <code>devtools</code> yet, install it via
<code>install.packages("devtools")</code>.</p>
</blockquote>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-3-1.png" width="70%"></p>
<pre><code>Dots  = Means
Error bars = 95% bootstrapped confidence Intervals (2000 replications)
Width = Distribution Density (Frequency)</code></pre>
<div class="section level3">
<h3 id="basic-idea">Basic idea<a class="anchor" aria-label="anchor" href="#basic-idea"></a>
</h3>
<p>This is cool because it gives you a 95% bootstrapped confidence
interval (with 2000 bootstraps), as shown by the error bars.
Bootstrapping is a non-parametric technique, meaning that it does not
need to respect the classical parametric assumptions (normality,
homoscedasticity, etc.). In this case it’s just a nice alternative way
to look at your data.</p>
<blockquote>
<p><strong><em>Note:</em></strong> bootstrapping requires a number of
bootstraps equal or higher than your number of observations (rows).
Because people sometimes work with big datasets, I’ve added an option to
specify a specific number of bootstraps with the option
<code>bootstraps = 2000</code> (change default to your desired value).
But because I’ve recently had to work with a very large data set (7
million observations), it was impractical to do 7 million bootstraps
(that would have been a very, very long operation), so I also added an
option to turn bootstrapping off completely and just use a regular
confidence interval instead; just add <code>boot = FALSE</code> as one
of the argument.</p>
</blockquote>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Save a high-resolution image file to specified directory</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">'nice_violinplothere.tiff'</span>, width <span class="op">=</span> <span class="fl">7</span>, height <span class="op">=</span> <span class="fl">7</span>, unit <span class="op">=</span> <span class="st">'in'</span>, dpi <span class="op">=</span> <span class="fl">300</span>,</span>
<span>       path <span class="op">=</span> <span class="st">"D:/R treasures/"</span><span class="op">)</span></span>
<span><span class="co"># Change the path to where you would like to save it.</span></span>
<span><span class="co"># If you copy-paste your path name, remember to use "R" slashes ('/' rather than '\').</span></span>
<span><span class="co"># Also remember to specify the .tiff extension of the file.</span></span></code></pre></div>
<blockquote>
<p><strong>Pro tip</strong>: Change <code>.tiff</code> for
<code>.pdf</code> or <code>.eps</code> for scalable vector graphics for
high-resolution submissions to scientific journals!</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="customization">Customization<a class="anchor" aria-label="anchor" href="#customization"></a>
</h2>
<div class="section level3">
<h3 id="change-x--and-y--axes-labels">Change x- and y- axes labels<a class="anchor" aria-label="anchor" href="#change-x--and-y--axes-labels"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            ytitle <span class="op">=</span> <span class="st">"Length of Tooth"</span>,</span>
<span>            xtitle <span class="op">=</span> <span class="st">"Vitamin C Dosage"</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-5-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="see-difference-between-two-groups">See difference between two groups<a class="anchor" aria-label="anchor" href="#see-difference-between-two-groups"></a>
</h3>
<p>To see if two groups are statistically significantly different.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            comp1 <span class="op">=</span> <span class="st">"0.5"</span>,</span>
<span>            comp2 <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-6-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="see-difference-between-two-other-groups">See difference between two other groups<a class="anchor" aria-label="anchor" href="#see-difference-between-two-other-groups"></a>
</h3>
<p>You can also select groups based on their position on the x-axis
(notice no quotes this time).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            comp1 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>            comp2 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-7-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="compare-all-three-groups">Compare all three groups<a class="anchor" aria-label="anchor" href="#compare-all-three-groups"></a>
</h3>
<p>What if you want to look at all three groups at the same time?
Unfortunately, the underlying package we use, <code>ggsignif</code>,
does not allow the comparison of more than one group at once. So we need
to tweak this manually instead. (Note that we can also use this
technique when the significance computed with <code>ggsignif</code> does
not correspond to the number of stars we want to use, for example if we
use a different <em>p</em>-value or not a <em>t</em>-test.)</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            signif_annotation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"*"</span>,<span class="st">"**"</span>,<span class="st">"***"</span><span class="op">)</span>, <span class="co"># manually enter the number of stars</span></span>
<span>            signif_yposition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">35</span>,<span class="fl">40</span><span class="op">)</span>, <span class="co"># What height (y) should the stars appear?</span></span>
<span>            signif_xmin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>, <span class="co"># Where should the left-sided brackets start (x)?</span></span>
<span>            signif_xmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="co"># Where should the right-sided brackets end (x)?</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-8-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="include-effect-size-cohens-d">Include effect size (Cohen’s <em>d</em>)<a class="anchor" aria-label="anchor" href="#include-effect-size-cohens-d"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"am"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"mpg"</span>,</span>
<span>            comp1 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            comp2 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>            has.d <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-9-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="set-the-colours-manually">Set the colours manually<a class="anchor" aria-label="anchor" href="#set-the-colours-manually"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"darkseagreen"</span>,<span class="st">"cadetblue"</span>,<span class="st">"darkslateblue"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-10-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="changing-the-names-of-the-x-axis-labels">Changing the names of the x-axis labels<a class="anchor" aria-label="anchor" href="#changing-the-names-of-the-x-axis-labels"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            xlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-11-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="removing-the-x-axis-or-y-axis-titles">Removing the x-axis or y-axis titles<a class="anchor" aria-label="anchor" href="#removing-the-x-axis-or-y-axis-titles"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            ytitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            xtitle <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-12-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="removing-the-x-axis-or-y-axis-labels-for-whatever-purpose">Removing the x-axis or y-axis labels (for whatever purpose)<a class="anchor" aria-label="anchor" href="#removing-the-x-axis-or-y-axis-labels-for-whatever-purpose"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            has.ylabels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            has.xlabels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-13-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="set-y-scale-manually">Set y-scale manually<a class="anchor" aria-label="anchor" href="#set-y-scale-manually"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            ymin <span class="op">=</span> <span class="fl">5</span>,</span>
<span>            ymax <span class="op">=</span> <span class="fl">35</span>,</span>
<span>            yby <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-14-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="with-x-number-of-groups">With x number of groups<a class="anchor" aria-label="anchor" href="#with-x-number-of-groups"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ToothGrowth</span><span class="op">$</span><span class="va">six.groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">60</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"six.groups"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-15-1.png" width="70%"></p>
<blockquote>
<p><strong>Pro tip</strong>: Save figure with greater width when you
have more groups!</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="plotting-individual-observations">Plotting individual observations<a class="anchor" aria-label="anchor" href="#plotting-individual-observations"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            obs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-16-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="micro-customizations">Micro-Customizations<a class="anchor" aria-label="anchor" href="#micro-customizations"></a>
</h3>
<p>It is also possible to do several minor adjustments: (a) ajust the
width of the caps (legs) of the confidence intervals with the
<code>CIcap.width</code> argument (set it to 0 to get rid of them); (b)
define the level of transparency with the <code>alpha</code> argument (1
is no transparency), (c) define the colour of the violins’ borders with
the <code>border.colour</code> argument (default is white which is the
equivalent of no borders).</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            CIcap.width <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            alpha <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>            border.colour <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>            border.size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-17-1.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="putting-it-all-together">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h3>
<p>If you’d like to see all available options at once (a bit long):</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>            group <span class="op">=</span> <span class="st">"dose"</span>,</span>
<span>            response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>            ytitle <span class="op">=</span> <span class="st">"Length of Tooth"</span>,   </span>
<span>            xtitle <span class="op">=</span> <span class="st">"Vitamin C Dosage"</span>,</span>
<span>            colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"darkseagreen"</span>, <span class="st">"cadetblue"</span>, <span class="st">"darkslateblue"</span><span class="op">)</span>,</span>
<span>            has.ylabels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            has.xlabels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            xlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span>,</span>
<span>            ymin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            ymax <span class="op">=</span> <span class="fl">45</span>,</span>
<span>            yby <span class="op">=</span> <span class="fl">15</span>,</span>
<span>            signif_annotation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"*"</span>,<span class="st">"NS"</span>,<span class="st">"***"</span><span class="op">)</span>,</span>
<span>            signif_yposition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">36</span>,<span class="fl">41</span><span class="op">)</span>,</span>
<span>            signif_xmin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>            signif_xmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span>,</span>
<span>            CIcap.width <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>            border.colour <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>            border.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            obs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            has.d <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            d.x <span class="op">=</span> <span class="fl">1.7</span>,</span>
<span>            d.y <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-18-1.png" width="70%"></p>
</div>
</div>
<div class="section level2">
<h2 id="special-situation-add-other-plot-elements">Special situation: Add other plot elements<a class="anchor" aria-label="anchor" href="#special-situation-add-other-plot-elements"></a>
</h2>
<p>The good thing about this function is that it outputs a
<code>ggplot</code> object, which you can continue to use to build on
your plot and customize it futher. For instance, I recently wanted to
add mean and sample size as annotations for each group (where I had
group sample sizes ranging from 100 to 35,000, so it was important to
know which groups were more representative). For the demonstration,
let’s just build the same multiple-groups plot we did earlier.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create our group variable:</span></span>
<span><span class="va">ToothGrowth</span><span class="op">$</span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,<span class="fl">60</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make the plot and save it to object "p"</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nice_violin.html">nice_violin</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ToothGrowth</span>,</span>
<span>                 group <span class="op">=</span> <span class="st">"groups"</span>,</span>
<span>                 response <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>                 border.size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>Then what I did is that I simply added conventional
<code>ggplot</code> code to my plot object. (But first I had to compute
the statistics we were going to be using:)</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute basic statistics and save to object</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://personality-project.org/r/psych/" class="external-link">psych</a></span><span class="op">)</span> <span class="co"># Install the psych package if you don't already have it</span></span>
<span><span class="va">statsSummary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/psych/man/describe.by.html" class="external-link">describeBy</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ToothGrowth</span><span class="op">$</span><span class="va">len</span>, group <span class="op">=</span> <span class="va">ToothGrowth</span><span class="op">$</span><span class="va">groups</span>, mat <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add our annotations! (Warning: a bit more complicated code ahead!)</span></span>
<span><span class="co">##+ fig.width=8</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span>geom<span class="op">=</span><span class="st">"text"</span>, <span class="co"># First annotation adds the average</span></span>
<span>             x<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">$</span><span class="va">groups</span><span class="op">)</span><span class="op">)</span>, <span class="co"># Specifies annotations is for all groups/x-axis ticks</span></span>
<span>             y<span class="op">=</span><span class="va">statsSummary</span><span class="op">$</span><span class="va">mean</span><span class="op">+</span><span class="fl">2</span>, <span class="co"># Puts mean at mean value on the y-axis (adds 2)</span></span>
<span>             label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"m="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">statsSummary</span><span class="op">$</span><span class="va">mean</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># That prints the mean on the plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span>geom<span class="op">=</span><span class="st">"text"</span>, <span class="co"># (Second annotation adds the sample size)</span></span>
<span>           x<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">$</span><span class="va">groups</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           y<span class="op">=</span><span class="va">statsSummary</span><span class="op">$</span><span class="va">mean</span><span class="op">-</span><span class="fl">2</span>, <span class="co"># Puts sample size at mean value on the y-axis (substracts 2)</span></span>
<span>           label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"n="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">statsSummary</span><span class="op">$</span><span class="va">n</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># That prints the sample size on the plot</span></span></code></pre></div>
<p><img src="violin_files/figure-html/unnamed-chunk-20-1.png" width="70%"></p>
<div class="section level3">
<h3 id="thanks-for-checking-in">Thanks for checking in<a class="anchor" aria-label="anchor" href="#thanks-for-checking-in"></a>
</h3>
<p>Make sure to check out this page again if you use the code after a
time or if you encounter errors, as I periodically update or improve the
code. Feel free to contact me for comments, questions, or requests to
improve this function at <a href="https://github.com/rempsyc/rempsyc/issues" class="external-link uri">https://github.com/rempsyc/rempsyc/issues</a>. See all
tutorials here: <a href="https://remi-theriault.com/tutorials" class="external-link uri">https://remi-theriault.com/tutorials</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://remi-theriault.com" class="external-link">Rémi Thériault</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
