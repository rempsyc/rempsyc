<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>rempsyc: Convenience Functions for Psychology R Package • rempsyc</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="rempsyc: Convenience Functions for Psychology R Package"><meta property="og:image" content="https://rempsyc.remi-theriault.com/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-274QZTFL23"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-274QZTFL23');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rempsyc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><h6 class="dropdown-header" data-toc-skip>√ STATISTICS</h6></li>
    <li><a class="dropdown-item" href="articles/table.html">APA tables</a></li>
    <li><a class="dropdown-item" href="articles/t-test.html">t tests</a></li>
    <li><a class="dropdown-item" href="articles/contrasts.html">Planned contrasts</a></li>
    <li><a class="dropdown-item" href="articles/moderation.html">Moderations</a></li>
    <li><a class="dropdown-item" href="articles/randomize.html">Randomization</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>📊 VISUALIZATION</h6></li>
    <li><a class="dropdown-item" href="articles/violin.html">Violin plots</a></li>
    <li><a class="dropdown-item" href="articles/scatter.html">Scatter plots</a></li>
    <li><a class="dropdown-item" href="articles/circles.html">Overlapping circles</a></li>
    <li><a class="dropdown-item" href="articles/assumptions.html">Assumptions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="TODOS.html">To-dos</a></li>
<li class="nav-item"><a class="nav-link" href="articles/featured.html">Featured In</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://doi.org/10.21105/joss.05466">JOSS Paper</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://lavaanExtra.remi-theriault.com/" aria-label="lavaanExtra">lavaanExtra</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/rempsyc" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rempsyc/rempsyc/" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sponsors/rempsyc" aria-label="Donate"><span class="fa fa-coffee"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>rempsyc: Convenience Functions for Psychology R Package</h1>
      <small class="dont-index">Source: <a href="https://github.com/rempsyc/rempsyc/blob/main/.github/copilot-instructions.md" class="external-link"><code>.github/copilot-instructions.md</code></a></small>
    </div>

<div id="rempsyc-convenience-functions-for-psychology-r-package" class="section level1">

<p>Always follow these instructions EXACTLY and only search for additional context if the information here is incomplete or found to be in error.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
<p>The <code>rempsyc</code> package is an R package providing convenience functions for psychology research, including statistical analysis, publication-ready tables (APA style), and data visualization. The package is built using R 4.3.3+ and follows standard R package development practices.</p>
<p><strong>CRITICAL REMINDER</strong>: Every PR must include version number updates in DESCRIPTION and changelog entries in NEWS.md. See the <a href="#version-management-and-changelog-updates">Version Management section</a> for detailed instructions.</p>
<p><strong>VERSION MANAGEMENT FREQUENCY</strong>: Version numbers and NEWS.md should be updated <strong>ONCE PER PULL REQUEST</strong>, not once per commit. Multiple commits within the same PR should use the same version number.</p>
</div>
<div class="section level2">
<h2 id="pre-configured-environment">Pre-Configured Environment<a class="anchor" aria-label="anchor" href="#pre-configured-environment"></a></h2>
<p><strong>NEW</strong>: This repository now includes <code>.github/workflows/copilot-setup-steps.yml</code> which automatically configures the development environment before GitHub Copilot starts working. This workflow intelligently determines what setup is needed using <strong>sophisticated conditional logic</strong>:</p>
<p><strong>For R package development tasks</strong> (editing .R files, functions, tests, etc.), it pre-installs: - R and system dependencies<br>
- Core development packages (rlang, dplyr, testthat, lintr, styler, roxygen2, reprex, devtools) - <strong>Complete reprex setup</strong>: knitr, rmarkdown, pandoc, clipr (all dependencies needed for creating reproducible examples) - <strong>IMPORTANT</strong>: Suggested packages are NOT installed during setup (install as needed per PR) - The rempsyc package itself (built and installed) - Verified functionality of core functions and reprex</p>
<p><strong>For documentation/configuration tasks</strong> (editing .md files, .yml files, copilot instructions, etc.), it runs minimal setup: - Repository checkout only - <strong>SMART DETECTION</strong>: Uses PR file analysis (GitHub API) or git diff for accurate change detection - Skips time-consuming R installation and package setup - Saves significant time for non-code changes (2-3 minutes)</p>
<p><strong>If the pre-configured environment is working</strong>, you can skip most manual installation steps below and go directly to the <a href="#build-and-development-workflow">Build and Development Workflow</a> section.</p>
<p><strong>Verification</strong>: Check if the environment is pre-configured by running:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(rempsyc); packageVersion("rempsyc")'</span></span></code></pre></div>
<p>If this works without errors, the environment is ready. If not, follow the manual setup below.</p>
</div>
<div class="section level2">
<h2 id="important-optimized-package-installation-strategy">IMPORTANT: Optimized Package Installation Strategy<a class="anchor" aria-label="anchor" href="#important-optimized-package-installation-strategy"></a></h2>
<p><strong>CRITICAL CHANGE</strong>: To save time, the pre-configured environment does NOT install suggested packages by default. Instead:</p>
<ol style="list-style-type: decimal"><li>
<strong>Core development packages are pre-installed</strong>: rlang, dplyr, testthat, lintr, styler, roxygen2, reprex, devtools, knitr, rmarkdown, clipr</li>
<li>
<strong>Complete reprex functionality</strong>: All dependencies for creating reproducible examples are pre-installed and tested</li>
<li>
<strong>Suggested packages are installed on-demand</strong>: Only install packages needed for your specific PR</li>
<li>
<strong>Significant time savings</strong>: Setup takes ~2-3 minutes instead of 5-10 minutes<br></li>
<li>
<strong>Follow targeted installation</strong>: Use the guidance below to install only what you need</li>
</ol><p><strong>What this means for your workflow</strong>: - ✅ Core development tools (linting, testing, documentation) work immediately - ✅ <strong>reprex functionality works out-of-the-box</strong> (knitr, rmarkdown, pandoc, clipr pre-installed) - ✅ Basic package building and testing work out of the box<br>
- ⚠️ Function-specific packages (ggplot2, flextable, etc.) need to be installed when working on those functions - 📖 Always use the <a href="#targeted-package-installation-workflow">Targeted Package Installation</a> approach below</p>
</div>
<div class="section level2">
<h2 id="resource-conscious-two-step-development-approach">Resource-Conscious Two-Step Development Approach<a class="anchor" aria-label="anchor" href="#resource-conscious-two-step-development-approach"></a></h2>
<p><strong>CRITICAL PHILOSOPHY</strong>: Installing R and dependencies is very expensive (time, resources, environment impact). The setup workflow is designed to minimize resource usage through a two-step approach:</p>
<div class="section level3">
<h3 id="two-step-development-scenarios">Two-Step Development Scenarios<a class="anchor" aria-label="anchor" href="#two-step-development-scenarios"></a></h3>
<p><strong>Scenario 1: Documentation/Configuration Changes Only</strong> - First run: No R installation (not necessary) ✅ - Change documentation: Still no R installation (not necessary) ✅ - Perfect resource optimization</p>
<p><strong>Scenario 2: Code Changes Required</strong> - <strong>First run: No R installation</strong> (intentionally delayed to save resources) - Make code changes to the best ability without full testing - Basic syntax checking and file editing - Commit initial code changes - <strong>Second run: R installation triggered</strong> (after code changes detected)<br>
- Full R setup occurs because <code>git diff</code> now detects R file changes - Complete testing, building, and validation - Full development workflow available</p>
</div>
<div class="section level3">
<h3 id="benefits-of-two-step-approach">Benefits of Two-Step Approach<a class="anchor" aria-label="anchor" href="#benefits-of-two-step-approach"></a></h3>
<ul><li>🌱 <strong>Environmental</strong>: Avoids unnecessary R installations (~5-10 minutes saved per run)</li>
<li>💰 <strong>Cost savings</strong>: Reduces compute resource usage significantly<br></li>
<li>⏱️ <strong>Time efficiency</strong>: First iterations are much faster (2-3 minutes vs 7-15 minutes)</li>
<li>🔄 <strong>Natural workflow</strong>: Matches how developers actually work (edit first, test second)</li>
<li>🎯 <strong>Smart resource allocation</strong>: Full resources only when actually needed</li>
</ul><p><strong>Implementation Note</strong>: This approach means the environment setup workflow will intentionally skip R installation on first runs, even when R code changes are planned. This is not a bug - it’s a deliberate resource optimization strategy.</p>
</div>
</div>
<div class="section level2">
<h2 id="environment-setup-manual---if-pre-configuration-failed">Environment Setup (Manual - if pre-configuration failed)<a class="anchor" aria-label="anchor" href="#environment-setup-manual---if-pre-configuration-failed"></a></h2>
<div class="section level3">
<h3 id="package-installation-philosophy">Package Installation Philosophy<a class="anchor" aria-label="anchor" href="#package-installation-philosophy"></a></h3>
<p><strong>CRITICAL - OPTIMIZED APPROACH</strong>: Install packages minimally and on-demand to avoid long installation times. The pre-configured environment does NOT install suggested packages - only core development tools. Only install packages that are actually required by the specific function you are modifying in your current PR.</p>
</div>
<div class="section level3">
<h3 id="install-r-and-required-system-dependencies">Install R and Required System Dependencies<a class="anchor" aria-label="anchor" href="#install-r-and-required-system-dependencies"></a></h3>
<p><strong>CRITICAL</strong>: Always ensure R is properly installed and functional before proceeding with any package development tasks.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Ubuntu/Debian systems - ALWAYS run this first in every session</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> r-base r-base-dev</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># Verify R installation is working</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">--version</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="fu">which</span> R</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co"># Install core R packages via system package manager (recommended)</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> r-cran-dplyr r-cran-rlang r-cran-testthat r-cran-lintr</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co"># Install reprex (ESSENTIAL for creating reproducible examples in PRs)  </span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: In pre-configured environment, reprex + all dependencies are already installed</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> r-cran-reprex <span class="kw">||</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("reprex", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co"># Install other essential development packages via system packages when possible</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> r-cran-devtools r-cran-roxygen2 r-cran-styler <span class="kw">||</span> <span class="bu">echo</span> <span class="st">"Some packages not available via apt, will install via R"</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co"># If styler, roxygen2, or devtools are not available via system packages, install via R:</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="st">packages_needed &lt;- c("styler", "roxygen2", "devtools")</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="st">packages_installed &lt;- rownames(installed.packages())</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="st">packages_to_install &lt;- setdiff(packages_needed, packages_installed)</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="st">if (length(packages_to_install) &gt; 0) {</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="st">  install.packages(packages_to_install, repos="https://cloud.r-project.org/")</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="verify-r-installation-and-core-packages">Verify R Installation and Core Packages<a class="anchor" aria-label="anchor" href="#verify-r-installation-and-core-packages"></a></h3>
<p><strong>NEVER SKIP</strong>: Always run this verification after installing R:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Test R basic functionality</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'print("R is working correctly")'</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># Verify core packages are available</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="st">required_packages &lt;- c("dplyr", "rlang", "testthat", "lintr", "reprex", "styler", "roxygen2", "knitr", "rmarkdown", "clipr")</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="st">missing_packages &lt;- required_packages[!sapply(required_packages, requireNamespace, quietly = TRUE)]</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="st">if (length(missing_packages) &gt; 0) {</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="st">  cat("Missing packages:", paste(missing_packages, collapse = ", "), "\n")</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="st">  cat("Run installation commands to install missing packages\n")</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="st">} else {</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="st">  cat("All core development packages are available\n")</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="st">  cat("reprex functionality fully supported\n")</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="essential-reprex-package-setup">Essential reprex Package Setup<a class="anchor" aria-label="anchor" href="#essential-reprex-package-setup"></a></h3>
<p><strong>CRITICAL</strong>: The reprex package is mandatory for creating reproducible examples in pull requests.</p>
<p><strong>If using the pre-configured environment</strong>: reprex and all its dependencies (pandoc, knitr, rmarkdown, clipr) are already installed and tested. Skip to step 4 to verify functionality.</p>
<p><strong>If setting up manually</strong>: Follow this complete setup process:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Step 1: Install required dependencies for reprex</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> pandoc</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages(c("knitr", "rmarkdown"), repos="https://cloud.r-project.org/")'</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co"># Step 2: Install reprex package</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="st">if (!requireNamespace("reprex", quietly = TRUE)) {</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="st">  # Try multiple installation methods</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="st">  tryCatch({</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="st">    install.packages("reprex", repos="https://cloud.r-project.org/")</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="st">  }, error = function(e1) {</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="st">    tryCatch({</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="st">      install.packages("reprex", repos="https://r-universe.dev")</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="st">    }, error = function(e2) {</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="st">      install.packages("pak", repos="https://r-lib.github.io/p/pak/stable/")</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="st">      pak::pak("reprex")</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="st">    })</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="st">  })</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="st">'</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co"># Step 3: CRITICAL - Set environment variable and test</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="bu">export</span> <span class="va">CLIPR_ALLOW</span><span class="op">=</span>TRUE <span class="kw">&amp;&amp;</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="st">library(reprex)</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="st"># Test reprex with simple code</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="st">result &lt;- reprex({</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="st">  x &lt;- 1:5</span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="st">  mean(x)</span></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="st">}, venue = "gh", advertise = FALSE, html_preview = FALSE)</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a><span class="st">if (length(result) &gt; 0) {</span></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a><span class="st">  cat("SUCCESS: reprex package is working correctly\n")</span></span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a><span class="st">  cat("Sample output:\n")</span></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a><span class="st">  cat(paste(head(result, 5), collapse = "\n"))</span></span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a><span class="st">} else {</span></span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a><span class="st">  stop("FAILED: reprex package installation failed - this is required for PR creation")</span></span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
<p><strong>ESSENTIAL</strong>: Always run <code>export CLIPR_ALLOW=TRUE</code> before using reprex to prevent crashes.</p>
</div>
<div class="section level3">
<h3 id="install-function-specific-dependencies-only">Install Function-Specific Dependencies Only<a class="anchor" aria-label="anchor" href="#install-function-specific-dependencies-only"></a></h3>
<p><strong>CRITICAL</strong>: Only install packages that are actually used by the specific function you are modifying. DO NOT install all suggested packages upfront as this causes long installation times.</p>
<div class="section level4">
<h4 id="determine-required-packages-for-your-function">Determine Required Packages for Your Function<a class="anchor" aria-label="anchor" href="#determine-required-packages-for-your-function"></a></h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Step 1: Find which packages your specific function actually requires</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># Check the function's rlang::check_installed() calls in the source code</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-A2</span> <span class="at">-B2</span> <span class="st">"rlang::check_installed"</span> R/<span class="pp">[</span><span class="ss">your_function_file</span><span class="pp">]</span>.R</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co"># Or search for all function dependencies:</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co"># grep -r "check_installed\|requireNamespace" R/[your_function_file].R</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="install-only-required-packages">Install Only Required Packages<a class="anchor" aria-label="anchor" href="#install-only-required-packages"></a></h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Step 2: Install ONLY the packages found in Step 1</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># Example: If working on nice_scatter(), you only need ggplot2</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("ggplot2", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co"># Example: If working on nice_table(), you only need flextable  </span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("flextable", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co"># Example: If working on nice_violin(), you need multiple packages</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages(c("ggplot2", "boot", "ggsignif"), repos="https://cloud.r-project.org/")'</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="use-rempsycs-built-in-utility-after-building-package">Use rempsyc’s Built-in Utility (After Building Package)<a class="anchor" aria-label="anchor" href="#use-rempsycs-built-in-utility-after-building-package"></a></h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Alternative: Use rempsyc's install_if_not_installed() for specific packages</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="st"># First build and install the current rempsyc package to access utility functions</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="st">if (file.exists("DESCRIPTION")) {</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="st">  system("R CMD build .")</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="st">  pkg_file &lt;- list.files(pattern = "rempsyc_.*\\.tar\\.gz")[1]</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="st">  if (!is.na(pkg_file)) system(paste("R CMD INSTALL", pkg_file))</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="st"># Load rempsyc and install only specific packages for your function</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="st">library(rempsyc)</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="st"># ONLY install packages needed for your specific function:</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="st">if (exists("install_if_not_installed")) {</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="st">  install_if_not_installed(c("ggplot2"))  # Example: only ggplot2 for nice_scatter</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="st">} else {</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="st">  install.packages("ggplot2", repos="https://cloud.r-project.org/")  # Fallback</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="set-up-r-user-library">Set Up R User Library<a class="anchor" aria-label="anchor" href="#set-up-r-user-library"></a></h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Create user library directory</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/R/library</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'R_LIBS_USER=~/R/library'</span> <span class="op">&gt;&gt;</span> ~/.Renviron</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="build-and-development-workflow">Build and Development Workflow<a class="anchor" aria-label="anchor" href="#build-and-development-workflow"></a></h2>
<div class="section level3">
<h3 id="targeted-package-installation-workflow">Targeted Package Installation Workflow<a class="anchor" aria-label="anchor" href="#targeted-package-installation-workflow"></a></h3>
<p><strong>ESSENTIAL</strong>: Follow this targeted approach to avoid “The package installation is taking a long time” issues:</p>
<ol style="list-style-type: decimal"><li><p><strong>Identify your function</strong>: Determine which specific function you’re modifying</p></li>
<li>
<p><strong>Find dependencies</strong>: Check what packages that function actually requires:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-A2</span> <span class="at">-B2</span> <span class="st">"rlang::check_installed\|requireNamespace"</span> R/<span class="pp">[</span><span class="ss">your_function</span><span class="pp">]</span>.R</span></code></pre></div>
</li>
<li><p><strong>Install only required packages</strong>: Install ONLY the packages found in step 2</p></li>
<li><p><strong>Test function</strong>: Test that your specific function works with the installed packages</p></li>
<li><p><strong>Proceed with development</strong>: Build, test, and develop normally</p></li>
</ol></div>
<div class="section level3">
<h3 id="build-the-package">Build the Package<a class="anchor" aria-label="anchor" href="#build-the-package"></a></h3>
<p><strong>NEVER CANCEL: Build takes ~19 seconds. Set timeout to 60+ seconds.</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">R</span> CMD build .</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co"># Creates: rempsyc_0.1.91.tar.gz (version may vary)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-the-package">Install the Package<a class="anchor" aria-label="anchor" href="#install-the-package"></a></h3>
<p><strong>NEVER CANCEL: Install takes ~3 seconds. Set timeout to 60+ seconds.</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL rempsyc_0.1.91.tar.gz</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co"># Or install from source:</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># R CMD INSTALL .</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="run-tests">Run Tests<a class="anchor" aria-label="anchor" href="#run-tests"></a></h3>
<p><strong>NEVER CANCEL: Tests take ~11 seconds. Set timeout to 30+ seconds.</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(testthat); library(rempsyc); test_local()'</span></span></code></pre></div>
<p>Expected results: - ~99 tests processed across multiple test files - ~94 tests should pass - 3-5 snapshot failures due to minor precision differences (normal and expected) - Some tests may be skipped if optional packages not available</p>
</div>
<div class="section level3">
<h3 id="run-linting">Run Linting<a class="anchor" aria-label="anchor" href="#run-linting"></a></h3>
<p><strong>NEVER CANCEL: Linting takes ~20 seconds. Set timeout to 60+ seconds.</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(lintr); lint_package()'</span></span></code></pre></div>
<p>Expected results: - Many style warnings (673+ issues found - normal for existing codebase) - Focus on new code adhering to style guidelines - Package is functional despite style warnings</p>
</div>
<div class="section level3">
<h3 id="auto-format-code-with-styler">Auto-format Code with Styler<a class="anchor" aria-label="anchor" href="#auto-format-code-with-styler"></a></h3>
<p><strong>NEVER CANCEL: Styling takes ~10-30 seconds depending on package size. Set timeout to 60+ seconds.</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co"># Style entire package</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(styler); style_pkg()'</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co"># Style specific file</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(styler); style_file("R/[function_name].R")'</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co"># Style specific directory</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(styler); style_dir("R")'</span></span></code></pre></div>
<p>Expected results: - Automatic code formatting according to tidyverse style guide - Consistent indentation, spacing, and bracket placement - Files will be modified in-place if styling changes are needed - Use after making changes but before committing</p>
</div>
<div class="section level3">
<h3 id="update-documentation-with-roxygen2">Update Documentation with roxygen2<a class="anchor" aria-label="anchor" href="#update-documentation-with-roxygen2"></a></h3>
<p><strong>NEVER CANCEL: Documentation update takes ~5-15 seconds. Set timeout to 60+ seconds.</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co"># Update documentation after making changes to roxygen2 comments</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'roxygen2::document()'</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co"># Alternative using devtools</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'devtools::document()'</span></span></code></pre></div>
<p>Expected results: - Updates .Rd files in man/ directory from roxygen2 comments - Updates NAMESPACE file with exports/imports - Essential step after modifying function documentation or adding/removing exports - Must be run before building the package if documentation was changed</p>
<p><strong>When to use</strong>: Always run this after: - Adding or modifying roxygen2 comments (the <code>#'</code> comments above functions) - Adding new exported functions - Changing function parameters or return values in documentation - Adding or removing <code>@export</code>, <code>@import</code>, or <code>@importFrom</code> tags</p>
</div>
<div class="section level3">
<h3 id="run-r-cmd-check">Run R CMD Check<a class="anchor" aria-label="anchor" href="#run-r-cmd-check"></a></h3>
<p><strong>NEVER CANCEL: R CMD check takes ~30 seconds (without suggested packages) to 5 minutes (full). Set timeout to 10+ minutes.</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co"># Without suggested packages (due to network limitations):</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>FALSE <span class="ex">R</span> CMD check rempsyc_0.1.91.tar.gz <span class="at">--no-manual</span> <span class="at">--no-vignettes</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co"># With all checks (if network access available):</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co"># R CMD check rempsyc_0.1.91.tar.gz</span></span></code></pre></div>
<p>Expected results: - Status: 1 ERROR (missing suggested packages - normal), 2 NOTEs<br>
- Core functionality passes all checks - Tests pass correctly - Examples may fail due to missing optional packages (expected)</p>
</div>
</div>
<div class="section level2">
<h2 id="validation-scenarios">Validation Scenarios<a class="anchor" aria-label="anchor" href="#validation-scenarios"></a></h2>
<div class="section level3">
<h3 id="always-test-core-functions-after-changes">Always Test Core Functions After Changes<a class="anchor" aria-label="anchor" href="#always-test-core-functions-after-changes"></a></h3>
<p>Test the main functions to ensure they work correctly:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="st">library(rempsyc)</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="st"># Test t-test function</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="st">result &lt;- nice_t_test(data = mtcars, response = "mpg", group = "am")</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="st">print(result)</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="st"># Test table formatting</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="st">library(testthat)  # If available</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="st">if (requireNamespace("flextable", quietly = TRUE)) {</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="st">  table &lt;- nice_table(result)</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="st">  print("Table creation successful")</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="st">} else {</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="st">  print("Flextable not available - table creation skipped")</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="st"># Test basic data functions</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="st">data &lt;- extract_duplicates(data.frame(id = c(1,1,2), val = c(1,2,3)), id = "id")</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="st">print("Core functions working correctly")</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mandatory-test-reprex-functionality-before-making-changes">MANDATORY: Test reprex Functionality Before Making Changes<a class="anchor" aria-label="anchor" href="#mandatory-test-reprex-functionality-before-making-changes"></a></h3>
<p><strong>CRITICAL</strong>: Always verify reprex is working before modifying any code that will require a PR:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="bu">export</span> <span class="va">CLIPR_ALLOW</span><span class="op">=</span>TRUE <span class="kw">&amp;&amp;</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="st"># Load required packages</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="st">library(reprex)</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="st">library(rempsyc)</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="st"># Create a test reprex with actual rempsyc function (WORKING EXAMPLE)</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="st">reprex_result &lt;- reprex({</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="st">  library(rempsyc)</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="st">  # Example with extract_duplicates function</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="st">  df1 &lt;- data.frame(</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="st">    id = c(1, 2, 3, 1, 3),</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="st">    score = c(NA, 85, 92, 88, 95)</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="st">  print("Original data:")</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="st">  print(df1)</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="st">  duplicates &lt;- extract_duplicates(df1, id = "id")</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="st">  print("Duplicates found:")</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="st">  print(duplicates)</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a><span class="st">}, venue = "gh", advertise = FALSE, html_preview = FALSE)</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a><span class="st"># Verify it worked</span></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a><span class="st">if (length(reprex_result) &gt; 0 &amp;&amp; any(grepl("library\\(rempsyc\\)", reprex_result))) {</span></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a><span class="st">  cat("SUCCESS: reprex is working correctly with rempsyc functions\n")</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a><span class="st">  cat("Sample reprex output:\n")</span></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a><span class="st">  cat(paste(reprex_result, collapse = "\n"))</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a><span class="st">  cat("\n")</span></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a><span class="st">} else {</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a><span class="st">  stop("FAILED: reprex is not working correctly - follow debugging guide in Troubleshooting section")</span></span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="manual-function-testing-workflow">Manual Function Testing Workflow<a class="anchor" aria-label="anchor" href="#manual-function-testing-workflow"></a></h3>
<p>After making changes to package functions:</p>
<ol style="list-style-type: decimal"><li>
<p><strong>Always rebuild and reinstall the package</strong>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">R</span> CMD build . <span class="kw">&amp;&amp;</span> <span class="ex">R</span> CMD INSTALL rempsyc_<span class="pp">*</span>.tar.gz</span></code></pre></div>
</li>
<li>
<p><strong>Test the specific function you modified</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(rempsyc); [your_function_test_here]'</span></span></code></pre></div>
</li>
<li>
<p><strong>Run relevant tests</strong>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(testthat); library(rempsyc); test_file("tests/testthat/test-[function_name].R")'</span></span></code></pre></div>
</li>
</ol></div>
</div>
<div class="section level2">
<h2 id="key-locations-and-files">Key Locations and Files<a class="anchor" aria-label="anchor" href="#key-locations-and-files"></a></h2>
<div class="section level3">
<h3 id="repository-exploration-commands">Repository Exploration Commands<a class="anchor" aria-label="anchor" href="#repository-exploration-commands"></a></h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># View repository structure</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span> /home/runner/work/rempsyc/rempsyc/</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co"># View R source files</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span> /home/runner/work/rempsyc/rempsyc/R/</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co"># View test files</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span> /home/runner/work/rempsyc/rempsyc/tests/testthat/</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a><span class="co"># Check package metadata</span></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="fu">cat</span> /home/runner/work/rempsyc/rempsyc/DESCRIPTION</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="source-code-structure">Source Code Structure<a class="anchor" aria-label="anchor" href="#source-code-structure"></a></h3>
<ul><li>
<code>/R/</code> - All R function source files (34+ files)</li>
<li>
<code>/tests/testthat/</code> - Test files using testthat framework</li>
<li>
<code>/tests/testthat.R</code> - Test runner entry point<br></li>
<li>
<code>/man/</code> - Documentation files (auto-generated from roxygen2)</li>
<li>
<code>/vignettes/</code> - R Markdown tutorials and documentation</li>
</ul></div>
<div class="section level3">
<h3 id="configuration-files">Configuration Files<a class="anchor" aria-label="anchor" href="#configuration-files"></a></h3>
<ul><li>
<code>DESCRIPTION</code> - Package metadata, dependencies, version</li>
<li>
<code>NAMESPACE</code> - Package exports (auto-generated from roxygen2)</li>
<li>
<code>.github/workflows/</code> - CI/CD workflows (R-CMD-check, lint, test-coverage)</li>
<li>
<code>.Rbuildignore</code> - Files to exclude from package build</li>
</ul></div>
<div class="section level3">
<h3 id="important-functions-by-category">Important Functions by Category<a class="anchor" aria-label="anchor" href="#important-functions-by-category"></a></h3>
<p><strong>Statistical Analysis</strong>: <code><a href="reference/nice_t_test.html">nice_t_test()</a></code>, <code><a href="reference/nice_contrasts.html">nice_contrasts()</a></code>, <code><a href="reference/nice_mod.html">nice_mod()</a></code>, <code><a href="reference/nice_lm.html">nice_lm()</a></code> <strong>Tables</strong>: <code><a href="reference/nice_table.html">nice_table()</a></code> (publication-ready APA tables) <strong>Visualization</strong>: <code><a href="reference/nice_violin.html">nice_violin()</a></code>, <code><a href="reference/nice_scatter.html">nice_scatter()</a></code>, <code><a href="reference/plot_outliers.html">plot_outliers()</a></code> <strong>Data Utilities</strong>: <code><a href="reference/extract_duplicates.html">extract_duplicates()</a></code>, <code><a href="reference/nice_na.html">nice_na()</a></code>, <code><a href="reference/scale_mad.html">scale_mad()</a></code></p>
</div>
</div>
<div class="section level2">
<h2 id="dependencies-and-package-management">Dependencies and Package Management<a class="anchor" aria-label="anchor" href="#dependencies-and-package-management"></a></h2>
<div class="section level3">
<h3 id="core-dependencies-always-required">Core Dependencies (Always Required)<a class="anchor" aria-label="anchor" href="#core-dependencies-always-required"></a></h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># In DESCRIPTION file:</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>Imports<span class="sc">:</span> rlang, <span class="fu">dplyr</span> (<span class="sc">&gt;=</span> <span class="dv">1</span>.<span class="fl">1.0</span>)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>Depends<span class="sc">:</span> <span class="fu">R</span> (<span class="sc">&gt;=</span> <span class="fl">3.6</span>)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="suggested-packages-optional">Suggested Packages (Optional)<a class="anchor" aria-label="anchor" href="#suggested-packages-optional"></a></h3>
<p>Many functions require optional packages. The package uses <code><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">rlang::check_installed()</a></code> to prompt users to install needed packages when functions are called.</p>
<p><strong>Key suggested packages</strong>: flextable, ggplot2, effectsize, performance, testthat, styler, roxygen2</p>
<p><strong>ESSENTIAL for development</strong>: reprex (mandatory for creating PR examples)</p>
</div>
<div class="section level3">
<h3 id="installing-additional-packages-only-when-needed">Installing Additional Packages (Only When Needed)<a class="anchor" aria-label="anchor" href="#installing-additional-packages-only-when-needed"></a></h3>
<p><strong>PRIORITY</strong>: Always install reprex first, then install other packages ONLY as needed for the specific function you are modifying:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># ALWAYS install reprex first (essential for PR creation):</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> r-cran-reprex <span class="kw">||</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("reprex", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co"># Via system packages (recommended for individual packages):</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> r-cran-<span class="pp">[</span><span class="ss">package</span><span class="pp">-</span><span class="ss">name</span><span class="pp">]</span></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="co"># Via R (if CRAN network available, for individual packages):</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("[package-name]", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="co"># Alternative sources when CRAN is blocked:</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a><span class="co"># Via R-universe (alternative CRAN mirror):</span></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("[package-name]", repos="https://r-universe.dev")'</span></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="co"># Via pak package (faster, handles dependencies better):</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("pak", repos="https://r-lib.github.io/p/pak/stable/"); pak::pak("[package-name]")'</span></span></code></pre></div>
<div class="section level4">
<h4 id="common-function-specific-package-requirements">Common Function-Specific Package Requirements<a class="anchor" aria-label="anchor" href="#common-function-specific-package-requirements"></a></h4>
<p><strong>DO NOT install all of these - only install what you need for your specific function:</strong></p>
<ul><li>
<strong>nice_table()</strong>: flextable</li>
<li>
<strong>nice_scatter()</strong>: ggplot2<br></li>
<li>
<strong>nice_violin()</strong>: ggplot2, boot, ggsignif</li>
<li>
<strong>nice_qq()</strong>: ggplot2, qqplotr, ggrepel</li>
<li>
<strong>cormatrix_excel()</strong>: correlation, openxlsx2</li>
<li>
<strong>nice_lm_slopes()</strong>: effectsize</li>
<li>
<strong>overlap_circle()</strong>: VennDiagram</li>
<li>
<strong>plot_outliers()</strong>: ggplot2</li>
</ul></div>
<div class="section level4">
<h4 id="check-function-dependencies-before-installing">Check Function Dependencies Before Installing<a class="anchor" aria-label="anchor" href="#check-function-dependencies-before-installing"></a></h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Find exactly which packages a function requires:</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-A2</span> <span class="at">-B2</span> <span class="st">"rlang::check_installed\|requireNamespace"</span> R/<span class="pp">[</span><span class="ss">function_file</span><span class="pp">]</span>.R</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="co"># Examples:</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co"># For nice_scatter.R: only requires ggplot2</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="co"># For nice_table.R: only requires flextable  </span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="co"># For nice_violin.R: requires ggplot2, boot, ggsignif</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="targeted-installation-examples">Targeted Installation Examples<a class="anchor" aria-label="anchor" href="#targeted-installation-examples"></a></h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Example 1: Working on nice_scatter() function</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("ggplot2", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="co"># Example 2: Working on nice_table() function  </span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages("flextable", repos="https://cloud.r-project.org/")'</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="co"># Example 3: Working on nice_violin() function (multiple dependencies)</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages(c("ggplot2", "boot", "ggsignif"), repos="https://cloud.r-project.org/")'</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a><span class="co"># Example 4: Working on cormatrix_excel() function</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'install.packages(c("correlation", "openxlsx2"), repos="https://cloud.r-project.org/")'</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="code-quality-and-best-practices">Code Quality and Best Practices<a class="anchor" aria-label="anchor" href="#code-quality-and-best-practices"></a></h2>
<div class="section level3">
<h3 id="avoiding-global-variable-binding-issues">Avoiding Global Variable Binding Issues<a class="anchor" aria-label="anchor" href="#avoiding-global-variable-binding-issues"></a></h3>
<p><strong>CRITICAL</strong>: Always use proper variable referencing to prevent “no visible binding for global variable” warnings that make CI workflows fail.</p>
<div class="section level4">
<h4 id="recommended-approaches">Recommended Approaches:<a class="anchor" aria-label="anchor" href="#recommended-approaches"></a></h4>
<ol style="list-style-type: decimal"><li>
<p><strong>For dplyr operations</strong>: Use <code>.data[[variable_name]]</code> notation</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CORRECT: Use .data[[var]] notation</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">group_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">response_var</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># INCORRECT: Direct variable names (causes binding warnings)</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group_var</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">response_var</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>For ggplot2 operations</strong>: Use <code>.data[[variable_name]]</code> or <code>aes_string()</code></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CORRECT: Use .data[[var]] in aes()</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_var</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">y_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ALTERNATIVE: Use aes_string() for string variables</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">data</span>, <span class="fu">aes_string</span><span class="op">(</span>x <span class="op">=</span> <span class="va">x_var</span>, y <span class="op">=</span> <span class="va">y_var</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Import required functions</strong>: Always explicitly import from other packages</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @importFrom dplyr group_by summarize</span></span>
<span><span class="co">#' @importFrom ggplot2 ggplot aes</span></span></code></pre></div>
</li>
</ol></div>
<div class="section level4">
<h4 id="discouraged-approaches">Discouraged Approaches:<a class="anchor" aria-label="anchor" href="#discouraged-approaches"></a></h4>
<ul><li>
<strong>DO NOT</strong> create <code>global_variables.R</code> files with <code><a href="https://rdrr.io/r/utils/globalVariables.html" class="external-link">utils::globalVariables()</a></code>
</li>
<li>
<strong>DO NOT</strong> use bare variable names in dplyr or ggplot operations</li>
<li>
<strong>DO NOT</strong> rely on global variable declarations to suppress warnings</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="ensuring-documentation-code-consistency">Ensuring Documentation-Code Consistency<a class="anchor" aria-label="anchor" href="#ensuring-documentation-code-consistency"></a></h3>
<p><strong>CRITICAL</strong>: Documentation must exactly match function arguments to prevent “Codoc mismatches” warnings.</p>
<div class="section level4">
<h4 id="documentation-validation-steps">Documentation Validation Steps:<a class="anchor" aria-label="anchor" href="#documentation-validation-steps"></a></h4>
<ol style="list-style-type: decimal"><li>
<p><strong>Match all parameter names exactly</strong>:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @param response The dependent variable name</span></span>
<span><span class="co">#' @param group The grouping variable name  </span></span>
<span><span class="va">function_name</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">response</span>, <span class="va">group</span><span class="op">)</span> <span class="op">{</span> <span class="va">...</span> <span class="op">}</span></span></code></pre></div>
</li>
<li>
<p><strong>Update documentation when changing parameters</strong>:</p>
<ul><li>Always run <code>roxygen2::document()</code> after parameter changes</li>
<li>Check that <code>.Rd</code> files reflect actual function signatures</li>
<li>Verify examples use correct parameter names</li>
</ul></li>
<li>
<p><strong>Validate before building</strong>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># Check for documentation mismatches</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'roxygen2::document()'</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="ex">R</span> CMD build .</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co"># Look for "Codoc mismatches" warnings</span></span></code></pre></div>
</li>
</ol></div>
</div>
</div>
<div class="section level2">
<h2 id="common-development-tasks">Common Development Tasks<a class="anchor" aria-label="anchor" href="#common-development-tasks"></a></h2>
<div class="section level3">
<h3 id="adding-a-new-function">Adding a New Function<a class="anchor" aria-label="anchor" href="#adding-a-new-function"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>FIRST: Update version number and NEWS.md</strong> (see Version Management section - do this ONCE per PR)</li>
<li>Create the function in <code>/R/[function_name].R</code>
</li>
<li>
<strong>Identify required packages</strong>: Check which packages the function will need using <code><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">rlang::check_installed()</a></code>
</li>
<li>
<strong>Install only required packages</strong>: Use targeted installation instead of batch installation</li>
<li>
<strong>Use proper variable referencing</strong>: Use <code>.data[[var]]</code> for dplyr/ggplot2 operations</li>
<li>Add roxygen2 documentation above the function (ensure parameter names match exactly)</li>
<li>Add <code>@importFrom</code> statements for all external functions used</li>
<li>Add exports to roxygen2 comments if needed (<code>@export</code>)</li>
<li>Create tests in <code>/tests/testthat/test-[function_name].R</code>
</li>
<li>
<strong>Check for global variable issues</strong>: <code>R CMD check</code> should show no binding warnings</li>
<li>
<strong>Lint the code</strong>: <code>R --no-restore --no-save -e 'library(lintr); lint_package()'</code>
</li>
<li>
<strong>Style the code</strong>: <code>R --no-restore --no-save -e 'library(styler); style_file("R/[function_name].R")'</code>
</li>
<li>
<strong>Update documentation</strong>: <code>R --no-restore --no-save -e 'roxygen2::document()'</code>
</li>
<li>
<strong>Validate documentation consistency</strong>: Check for “Codoc mismatches” warnings</li>
<li>Rebuild and test: <code>R CMD build . &amp;&amp; R CMD INSTALL rempsyc_*.tar.gz</code>
</li>
<li>Run tests: <code>R --no-restore --no-save -e 'library(testthat); library(rempsyc); test_local()'</code>
</li>
<li>
<strong>Create reprex examples</strong>: Prepare reproducible examples showing the new function in action for PR description</li>
<li>
<strong>If making additional commits</strong>: DO NOT update version/NEWS.md again - use same version for all commits in this PR</li>
</ol></div>
<div class="section level3">
<h3 id="modifying-existing-functions">Modifying Existing Functions<a class="anchor" aria-label="anchor" href="#modifying-existing-functions"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>FIRST: Update version number and NEWS.md</strong> (see Version Management section - do this ONCE per PR)</li>
<li>
<strong>Identify current function dependencies</strong>: Check which packages the function currently requires</li>
<li>Edit the function in appropriate <code>/R/[file].R</code>
</li>
<li>
<strong>Check if new packages are needed</strong>: If adding functionality, identify any new package requirements</li>
<li>
<strong>Install only new required packages</strong>: Install only what’s newly needed, not all suggested packages</li>
<li>
<strong>Ensure proper variable referencing</strong>: Replace bare variable names with <code>.data[[var]]</code> notation</li>
<li>Update documentation if parameters changed (ensure exact parameter name matches)</li>
<li>Update <code>@importFrom</code> statements if new external functions are used</li>
<li>Update tests if function behavior changes</li>
<li>
<strong>Check for global variable issues</strong>: <code>R CMD check</code> should show no binding warnings</li>
<li>
<strong>Lint the code</strong>: <code>R --no-restore --no-save -e 'library(lintr); lint_package()'</code>
</li>
<li>
<strong>Style the code</strong>: <code>R --no-restore --no-save -e 'library(styler); style_file("R/[file].R")'</code>
</li>
<li>
<strong>Update documentation if changed</strong>: <code>R --no-restore --no-save -e 'roxygen2::document()'</code>
</li>
<li>
<strong>Validate documentation consistency</strong>: Check for “Codoc mismatches” warnings</li>
<li>
<strong>Always rebuild and reinstall</strong>: <code>R CMD build . &amp;&amp; R CMD INSTALL rempsyc_*.tar.gz</code>
</li>
<li><strong>Always test the specific function manually</strong></li>
<li>Run full test suite to check for regressions</li>
<li>
<strong>Create before/after reprexes</strong>: Prepare examples showing the old vs new behavior for PR description</li>
<li>
<strong>If making additional commits</strong>: DO NOT update version/NEWS.md again - use same version for all commits in this PR</li>
</ol></div>
</div>
<div class="section level2">
<h2 id="version-management-and-changelog-updates">Version Management and Changelog Updates<a class="anchor" aria-label="anchor" href="#version-management-and-changelog-updates"></a></h2>
<p><strong>CRITICAL</strong>: Every PR must include version number updates and NEWS.md changelog entries. This is mandatory for all changes.</p>
<p><strong>IMPORTANT CLARIFICATION</strong>: Version numbers should be bumped <strong>ONCE PER PULL REQUEST</strong>, not once per commit. If you make multiple commits within a single PR, all commits should use the same version number. Only bump the version once at the beginning of your PR work or before submitting the PR for review.</p>
<div class="section level3">
<h3 id="version-numbering-system">Version Numbering System<a class="anchor" aria-label="anchor" href="#version-numbering-system"></a></h3>
<p>The rempsyc package follows this versioning pattern: - <strong>Major releases</strong> (CRAN submissions): Two decimals (e.g., 0.1.9, 0.1.8, 0.1.7) - <strong>Development versions</strong> (between CRAN releases): Three decimals (e.g., 0.1.8.3, 0.1.8.2, 0.1.8.1)</p>
</div>
<div class="section level3">
<h3 id="when-to-bump-versions">When to Bump Versions<a class="anchor" aria-label="anchor" href="#when-to-bump-versions"></a></h3>
<p><strong>ALWAYS</strong> bump the version for ANY change that affects the package: 1. <strong>Bug fixes</strong>: Increment the third decimal (0.1.91 → 0.1.92) 2. <strong>New features</strong>: Increment the third decimal (0.1.91 → 0.1.92) 3. <strong>Breaking changes</strong>: Increment the second decimal (0.1.91 → 0.2.0) - rare 4. <strong>Documentation-only changes</strong>: Still increment third decimal for tracking</p>
</div>
<div class="section level3">
<h3 id="multiple-commits-within-a-single-pr">Multiple Commits Within a Single PR<a class="anchor" aria-label="anchor" href="#multiple-commits-within-a-single-pr"></a></h3>
<p><strong>CRITICAL RULE</strong>: If your PR involves multiple commits, use the same version number for ALL commits in that PR.</p>
<p><strong>Correct approach for multi-commit PR</strong>: 1. <strong>At the start of your PR work</strong>: Bump version from 0.1.91 → 0.1.92 and update NEWS.md 2. <strong>First commit</strong>: Contains version bump + your first set of changes 3. <strong>Subsequent commits</strong>: Use the same version (0.1.92) for any additional changes 4. <strong>Do NOT bump version again</strong> until you start a new PR</p>
<p><strong>Example of correct multi-commit PR</strong>: - Commit 1: “Bump version to 0.1.92 and add new feature X” - Commit 2: “Fix bug in feature X (still version 0.1.92)” - Commit 3: “Update documentation for feature X (still version 0.1.92)” - All commits use version 0.1.92, NEWS.md updated once in commit 1</p>
<p><strong>NEVER do this</strong> (incorrect approach): - Commit 1: “Add feature X, bump to 0.1.92” - Commit 2: “Fix bug in feature X, bump to 0.1.93” ❌ WRONG - Commit 3: “Update docs, bump to 0.1.94” ❌ WRONG</p>
</div>
<div class="section level3">
<h3 id="how-to-update-version-number">How to Update Version Number<a class="anchor" aria-label="anchor" href="#how-to-update-version-number"></a></h3>
<ol style="list-style-type: decimal"><li>
<p><strong>Edit the DESCRIPTION file</strong>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="co"># Find current version</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="fu">grep</span> <span class="st">"Version:"</span> DESCRIPTION</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="co"># Update to next version (example: 0.1.91 → 0.1.92)</span></span></code></pre></div>
</li>
<li>
<p><strong>Version update pattern</strong>:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Current version: 0.1.91</span></span>
<span><span class="co"># For your PR: 0.1.92</span></span>
<span><span class="co"># Next PR: 0.1.93</span></span>
<span><span class="co"># etc.</span></span></code></pre></div>
</li>
</ol></div>
<div class="section level3">
<h3 id="how-to-update-newsmd">How to Update NEWS.md<a class="anchor" aria-label="anchor" href="#how-to-update-newsmd"></a></h3>
<p><strong>MANDATORY</strong>: Add your changes to the top of NEWS.md following this exact format:</p>
<ol style="list-style-type: decimal"><li>
<p><strong>For first change after a major release</strong> (e.g., after 0.1.9 was released):</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu"># rempsyc 0.1.10</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ss">* </span>CRAN submission (when ready)</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="fu">## rempsyc 0.1.9.1</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="ss">* </span>Your change description here</span></code></pre></div>
</li>
<li>
<p><strong>For subsequent development changes</strong> (when 0.1.9.1 already exists):</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu"># rempsyc 0.1.10</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="ss">* </span>CRAN submission (when ready)</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="fu">## rempsyc 0.1.9.2</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="ss">* </span>Your new change description here</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="fu">## rempsyc 0.1.9.1  </span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="ss">* </span>Previous change description here</span></code></pre></div>
</li>
<li>
<p><strong>Change description guidelines</strong>:</p>
<ul><li>Use function names in backticks: <code><a href="reference/nice_table.html">nice_table()</a></code>
</li>
<li>Be specific about what changed</li>
<li>Include issue references if applicable: (#28)</li>
<li>Examples:
<ul><li>
<code><a href="reference/nice_table.html">nice_table()</a></code>: fix bug with grouped tibbles leading to an error</li>
<li>
<code><a href="reference/nice_scatter.html">nice_scatter()</a></code>: add new <code>color_by</code> argument for categorical coloring<br></li>
<li>
<code><a href="reference/cormatrix_excel.html">cormatrix_excel()</a></code> now relies entirely on <code><a href="https://easystats.github.io/correlation/reference/cormatrix_to_excel.html" class="external-link">correlation::cormatrix_to_excel()</a></code> to reduce maintenance</li>
</ul></li>
</ul></li>
</ol></div>
<div class="section level3">
<h3 id="automated-version-management-workflow">Automated Version Management Workflow<a class="anchor" aria-label="anchor" href="#automated-version-management-workflow"></a></h3>
<p><strong>Follow this exact sequence ONCE PER PR</strong> (not per commit):</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="co"># Step 1: Check current version</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="fu">grep</span> <span class="st">"Version:"</span> DESCRIPTION</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-A5</span> <span class="st">"^# rempsyc"</span> NEWS.md <span class="kw">|</span> <span class="fu">head</span> <span class="at">-10</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="co"># Step 2: Determine new version number</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="co"># Current: 0.1.91 → New: 0.1.92 (example)</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a><span class="co"># Step 3: Update DESCRIPTION file (ONCE per PR)</span></span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">'s/Version: 0.1.91/Version: 0.1.92/'</span> DESCRIPTION</span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a><span class="co"># Step 4: Update NEWS.md (ONCE per PR - add entry at the top)</span></span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a><span class="co"># Use your preferred text editor or str_replace_editor</span></span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a><span class="co"># Step 5: Verify updates</span></span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a><span class="fu">grep</span> <span class="st">"Version:"</span> DESCRIPTION</span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a><span class="fu">head</span> <span class="at">-10</span> NEWS.md</span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a><span class="co"># Step 6: Proceed with normal build/test workflow</span></span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a><span class="co"># Step 7: Make your code changes and commit everything together</span></span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a><span class="co"># Step 8: Any additional commits in this PR should NOT change version numbers again</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="version-update-examples">Version Update Examples<a class="anchor" aria-label="anchor" href="#version-update-examples"></a></h3>
<div class="section level4">
<h4 id="example-1-bug-fix">Example 1: Bug Fix<a class="anchor" aria-label="anchor" href="#example-1-bug-fix"></a></h4>
<div class="sourceCode" id="cb37"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu"># In DESCRIPTION: Version: 0.1.91 → 0.1.92</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="fu"># In NEWS.md (add at top):</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="fu">## rempsyc 0.1.91.1  </span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="ss">* </span><span class="in">`nice_table()`</span>: fix column alignment issue with long variable names</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="example-2-new-feature">Example 2: New Feature<a class="anchor" aria-label="anchor" href="#example-2-new-feature"></a></h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu"># In DESCRIPTION: Version: 0.1.92 → 0.1.93</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="fu"># In NEWS.md (add at top):</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="fu">## rempsyc 0.1.92.1</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="ss">* </span><span class="in">`nice_scatter()`</span>: add <span class="in">`theme_preset`</span> argument for quick plot styling options</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="example-3-multiple-changes">Example 3: Multiple Changes<a class="anchor" aria-label="anchor" href="#example-3-multiple-changes"></a></h4>
<div class="sourceCode" id="cb39"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu"># In DESCRIPTION: Version: 0.1.93 → 0.1.94  </span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="fu"># In NEWS.md (add at top):</span></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="fu">## rempsyc 0.1.93.1</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="ss">* </span><span class="in">`nice_violin()`</span>: improve error messages for invalid grouping variables</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="ss">* </span><span class="in">`plot_outliers()`</span>: add support for custom outlier detection methods</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a><span class="ss">* </span>Documentation updates for improved clarity across all visualization functions</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="before-submitting-your-pr-final-validation">Before Submitting Your PR (Final Validation)<a class="anchor" aria-label="anchor" href="#before-submitting-your-pr-final-validation"></a></h3>
<p><strong>CRITICAL</strong>: Always run this complete validation sequence to ensure workflow checks pass on first try. This should be done once before submitting your PR for review, not before every individual commit.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="co"># 0. ENSURE: Version number and NEWS.md were already updated once at the beginning of this PR</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="co">#    (Do NOT update them again if this is a subsequent commit in the same PR)</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="co"># 1. Check for global variable binding issues first (look for "no visible binding" warnings)</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'warnings(); R CMD check rempsyc_*.tar.gz --no-manual --no-vignettes 2&gt;&amp;1 | grep -i "binding"'</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a><span class="co"># 2. Lint code to identify style issues (20 seconds)</span></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(lintr); lint_package()'</span></span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a><span class="co"># 3. Style code to automatically fix issues (10-30 seconds) - optional but recommended</span></span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(styler); style_pkg()'</span></span>
<span id="cb40-14"><a href="#cb40-14" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" tabindex="-1"></a><span class="co"># 4. Update documentation if documentation was changed (5-15 seconds)</span></span>
<span id="cb40-16"><a href="#cb40-16" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'roxygen2::document()'</span></span>
<span id="cb40-17"><a href="#cb40-17" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" tabindex="-1"></a><span class="co"># 5. Build (19 seconds)</span></span>
<span id="cb40-19"><a href="#cb40-19" tabindex="-1"></a><span class="ex">R</span> CMD build .</span>
<span id="cb40-20"><a href="#cb40-20" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" tabindex="-1"></a><span class="co"># 6. Install  </span></span>
<span id="cb40-22"><a href="#cb40-22" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL rempsyc_<span class="pp">*</span>.tar.gz</span>
<span id="cb40-23"><a href="#cb40-23" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" tabindex="-1"></a><span class="co"># 7. Test (11 seconds) </span></span>
<span id="cb40-25"><a href="#cb40-25" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(testthat); library(rempsyc); test_local()'</span></span>
<span id="cb40-26"><a href="#cb40-26" tabindex="-1"></a></span>
<span id="cb40-27"><a href="#cb40-27" tabindex="-1"></a><span class="co"># 8. Final R CMD check for all issues (~30 seconds) - REQUIRED before PR submission</span></span>
<span id="cb40-28"><a href="#cb40-28" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>FALSE <span class="ex">R</span> CMD check rempsyc_<span class="pp">*</span>.tar.gz <span class="at">--no-manual</span> <span class="at">--no-vignettes</span></span>
<span id="cb40-29"><a href="#cb40-29" tabindex="-1"></a></span>
<span id="cb40-30"><a href="#cb40-30" tabindex="-1"></a><span class="co"># 9. Look specifically for critical warnings that fail CI:</span></span>
<span id="cb40-31"><a href="#cb40-31" tabindex="-1"></a><span class="co"># - "no visible binding for global variable"</span></span>
<span id="cb40-32"><a href="#cb40-32" tabindex="-1"></a><span class="co"># - "Codoc mismatches from Rd file"</span></span>
<span id="cb40-33"><a href="#cb40-33" tabindex="-1"></a><span class="co"># - Fix these issues before submitting your PR</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pull-request-requirements">Pull Request Requirements<a class="anchor" aria-label="anchor" href="#pull-request-requirements"></a></h3>
<p><strong>CRITICAL</strong>: When creating pull requests, you MUST include ALL of the following:</p>
<ol style="list-style-type: decimal"><li>
<strong>Version number bump</strong> in DESCRIPTION file (see Version Management section above)</li>
<li>
<strong>NEWS.md changelog entry</strong> with your changes (see Version Management section above)<br></li>
<li>
<strong>Reprexes</strong> (minimally reproducible examples) showing the old and new behavior for comparison</li>
</ol><p><strong>MANDATORY</strong>: Use the actual <code>reprex</code> package - NEVER simulate or guess at reprex output. The repository owner needs to see actual function behavior, including plots/images that cannot be simulated.</p>
<p><strong>VERSION MANAGEMENT IS NOT OPTIONAL</strong>: Every PR must include version updates and changelog entries. PRs without these updates will be rejected.</p>
<div class="section level4">
<h4 id="creating-reprexes-for-prs">Creating Reprexes for PRs:<a class="anchor" aria-label="anchor" href="#creating-reprexes-for-prs"></a></h4>
<ol style="list-style-type: decimal"><li><p><strong>Use base R datasets</strong> when possible (e.g., <code>mtcars</code>, <code>iris</code>, <code>airquality</code>) for reproducible examples</p></li>
<li><p><strong>Show before/after behavior</strong> with your code changes</p></li>
<li>
<p><strong>ALWAYS use the actual reprex package</strong> for consistent formatting:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co"># Ensure reprex is installed and working BEFORE creating PR</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="st">if (!requireNamespace("reprex", quietly = TRUE)) {</span></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="st">  stop("reprex package MUST be installed before creating PRs")</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="st">library(reprex)</span></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="st"># Test with simple example first</span></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a><span class="st">test_result &lt;- reprex(input = "x &lt;- 1:5\nmean(x)", venue = "gh", advertise = FALSE, show = FALSE)</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="st">if (length(test_result) == 0) {</span></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a><span class="st">  stop("reprex package is not working correctly")</span></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a><span class="st">cat("reprex is ready for PR creation\n")</span></span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</li>
<li>
<p><strong>Generate ACTUAL reprex output</strong> using this workflow:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://reprex.tidyverse.org" class="external-link">reprex</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For BEFORE behavior (if modifying existing function):</span></span>
<span><span class="va">before_code</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">library(rempsyc)</span></span>
<span><span class="st">data(mtcars)</span></span>
<span><span class="st"># [your code showing current behavior]</span></span>
<span><span class="st">"</span></span>
<span><span class="va">before_reprex</span> <span class="op">&lt;-</span> <span class="fu">reprex</span><span class="op">(</span>input <span class="op">=</span> <span class="va">before_code</span>, venue <span class="op">=</span> <span class="st">"gh"</span>, advertise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For AFTER behavior (with your changes):</span></span>
<span><span class="va">after_code</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">library(rempsyc)</span></span>
<span><span class="st">data(mtcars)</span></span>
<span><span class="st"># [your code showing improved behavior]</span></span>
<span><span class="st">"</span></span>
<span><span class="va">after_reprex</span> <span class="op">&lt;-</span> <span class="fu">reprex</span><span class="op">(</span>input <span class="op">=</span> <span class="va">after_code</span>, venue <span class="op">=</span> <span class="st">"gh"</span>, advertise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Include both ACTUAL reprex outputs</strong> in your PR description:</p>
<ul><li>
<strong>Before</strong>: Real reprex output showing the current (problematic) behavior</li>
<li>
<strong>After</strong>: Real reprex output showing the improved behavior with your changes</li>
</ul></li>
</ol></div>
<div class="section level4">
<h4 id="optimized-reprex-creation-with-image-handling">Optimized Reprex Creation with Image Handling:<a class="anchor" aria-label="anchor" href="#optimized-reprex-creation-with-image-handling"></a></h4>
<p><strong>ESSENTIAL</strong>: Always generate actual reprex with automatic imgur integration for plots:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="bu">cd</span> /home/runner/work/rempsyc/rempsyc</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="bu">export</span> <span class="va">CLIPR_ALLOW</span><span class="op">=</span>TRUE <span class="kw">&amp;&amp;</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="st">library(reprex)</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="st">library(rempsyc)</span></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a><span class="st"># Create ACTUAL reprex - plots automatically uploaded to imgur</span></span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a><span class="st">reprex_result &lt;- reprex({</span></span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a><span class="st">  library(rempsyc)</span></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a><span class="st">  library(ggplot2)</span></span>
<span id="cb43-10"><a href="#cb43-10" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" tabindex="-1"></a><span class="st">  # Example: Create visualization with your function  </span></span>
<span id="cb43-12"><a href="#cb43-12" tabindex="-1"></a><span class="st">  plot &lt;- nice_scatter(</span></span>
<span id="cb43-13"><a href="#cb43-13" tabindex="-1"></a><span class="st">    data = mtcars,</span></span>
<span id="cb43-14"><a href="#cb43-14" tabindex="-1"></a><span class="st">    response = "mpg",</span></span>
<span id="cb43-15"><a href="#cb43-15" tabindex="-1"></a><span class="st">    predictor = "wt", </span></span>
<span id="cb43-16"><a href="#cb43-16" tabindex="-1"></a><span class="st">    has.r = TRUE,</span></span>
<span id="cb43-17"><a href="#cb43-17" tabindex="-1"></a><span class="st">    has.p = TRUE</span></span>
<span id="cb43-18"><a href="#cb43-18" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb43-19"><a href="#cb43-19" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb43-20"><a href="#cb43-20" tabindex="-1"></a><span class="st">  print(plot)</span></span>
<span id="cb43-21"><a href="#cb43-21" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb43-22"><a href="#cb43-22" tabindex="-1"></a><span class="st">}, venue = "gh", advertise = TRUE, html_preview = FALSE)</span></span>
<span id="cb43-23"><a href="#cb43-23" tabindex="-1"></a></span>
<span id="cb43-24"><a href="#cb43-24" tabindex="-1"></a><span class="st"># Display complete reprex with imgur links embedded</span></span>
<span id="cb43-25"><a href="#cb43-25" tabindex="-1"></a><span class="st">cat(paste(reprex_result, collapse = "\n"))</span></span>
<span id="cb43-26"><a href="#cb43-26" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
<p><strong>Key Benefits of This Approach</strong>: - ✅ <strong>Automatic image hosting</strong>: Plots automatically uploaded to imgur (whitelisted domain) - ✅ <strong>No local artifacts</strong>: No PNG files left in repository to accidentally commit<br>
- ✅ <strong>Complete format</strong>: Includes “Created on [date] with reprex v[version]” footer - ✅ <strong>Direct embedding</strong>: Images display directly in GitHub responses - ✅ <strong>Clean workflow</strong>: No manual upload or cleanup steps required</p>
<p><strong>CRITICAL</strong>: Always set <code>advertise = TRUE</code> to get the complete format with date/version info that provides authority to your reprex.</p>
<pre><code>
**RStudio Users**: Use the reprex addin for faster creation:
- Install reprex: `install.packages("reprex")`
- Go to `Addins` → Search "reprex" → Select "Render reprex..."
- Copy code → Use addin → Check "Append session info" → Render

**Workflow Logic**:
- Lint first to identify all style issues
- Style second to automatically fix what can be fixed
- Update documentation third if any roxygen2 comments were changed
- Build and test last to validate everything works together

## Troubleshooting

### "The package installation is taking a long time"
- **Cause**: Installing too many suggested packages instead of only the ones needed for the current function
- **Solution**: Follow the targeted installation approach - only install packages specifically required by the function you're modifying
- **NEW**: The pre-configured environment no longer installs suggested packages to prevent this issue
- **Prevention**: Always use `grep -A2 -B2 "rlang::check_installed" R/[function_file].R` to identify minimal dependencies first

### "Could not find function" Errors
- **Cause**: Package not loaded or installed
- **Solution**: Run `R CMD build . &amp;&amp; R CMD INSTALL rempsyc_*.tar.gz` then `library(rempsyc)`

### Missing Package Errors
- **Cause**: Suggested packages not installed
- **Solution**: Install via `sudo apt install r-cran-[package]` or ignore if testing core functionality

### Network/CRAN Access Issues
- **Cause**: Blocked network access to CRAN mirrors
- **Solution**: Use system packages via apt or skip optional package tests

### Test Snapshot Failures
- **Cause**: Minor precision differences in numerical results (normal)
- **Solution**: Review changes, accept if precision differences are minor: `testthat::snapshot_accept()`

### Build Failures
- **Cause**: Syntax errors, missing dependencies, or file issues
- **Solution**: Check specific error messages, ensure DESCRIPTION is correct, verify all R files have valid syntax

### Styler Not Available
- **Cause**: styler package not installed
- **Solution**: Install via R: `R --no-restore --no-save -e 'install.packages("styler", repos="https://cloud.r-project.org/")'` or skip styling step if not critical

### Roxygen2 Not Available
- **Cause**: roxygen2 package not installed
- **Solution**: Install via R: `R --no-restore --no-save -e 'install.packages("roxygen2", repos="https://cloud.r-project.org/")'` or use devtools: `R --no-restore --no-save -e 'devtools::document()'`

### Documentation Build Failures
- **Cause**: Documentation not updated after changing roxygen2 comments
- **Solution**: Run `R --no-restore --no-save -e 'roxygen2::document()'` before building the package

### Global Variable Binding Warnings ("no visible binding")
- **Cause**: Using bare variable names in dplyr/ggplot2 operations instead of proper notation
- **Solution**: Replace with `.data[[variable_name]]` notation and add proper `@importFrom` statements
- **Example**: Change `group_by(var)` to `group_by(.data[[var]])`
- **DO NOT**: Create `global_variables.R` files with `utils::globalVariables()`

### Documentation Mismatch Warnings ("Codoc mismatches")
- **Cause**: Function parameter names don't match the documentation
- **Solution**: Ensure `@param parameter_name` exactly matches function arguments
- **Prevention**: Always run `roxygen2::document()` after changing function signatures

### CRAN/Network Access Blocked
- **Cause**: Cannot install packages from CRAN mirrors
- **Solutions**:
  - Use system packages: `sudo apt install r-cran-[package]`
  - Try R-universe: `repos="https://r-universe.dev"`
  - Use pak package: `pak::pak("[package-name]")`

### reprex Package Issues and Complete Debugging Guide
**CRITICAL SOLUTION**: The main issues with reprex are missing dependencies and environment variables.

**NEW**: In the pre-configured environment (copilot-setup-steps.yml), all reprex dependencies are now pre-installed: pandoc, knitr, rmarkdown, clipr. If you're using the pre-configured environment, skip to Step 3 (Set Environment Variables).

**For manual setup or debugging**: Follow this complete debugging guide:

#### Step 1: Install Required Dependencies
```bash
# Install core dependencies first
sudo apt install -y pandoc
R --no-restore --no-save -e 'install.packages(c("knitr", "rmarkdown"), repos="https://cloud.r-project.org/")'</code></pre>
</div>
<div class="section level4">
<h4 id="step-2-install-reprex-package">Step 2: Install reprex Package<a class="anchor" aria-label="anchor" href="#step-2-install-reprex-package"></a></h4>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Multi-method installation</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="st">if (!requireNamespace("reprex", quietly = TRUE)) {</span></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="st">  tryCatch({</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="st">    install.packages("reprex", repos="https://cloud.r-project.org/")</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="st">  }, error = function(e1) {</span></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a><span class="st">    tryCatch({</span></span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a><span class="st">      install.packages("reprex", repos="https://r-universe.dev")</span></span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a><span class="st">    }, error = function(e2) {</span></span>
<span id="cb45-10"><a href="#cb45-10" tabindex="-1"></a><span class="st">      install.packages("pak", repos="https://r-lib.github.io/p/pak/stable/")</span></span>
<span id="cb45-11"><a href="#cb45-11" tabindex="-1"></a><span class="st">      pak::pak("reprex")</span></span>
<span id="cb45-12"><a href="#cb45-12" tabindex="-1"></a><span class="st">    })</span></span>
<span id="cb45-13"><a href="#cb45-13" tabindex="-1"></a><span class="st">  })</span></span>
<span id="cb45-14"><a href="#cb45-14" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb45-15"><a href="#cb45-15" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-3-set-environment-variables-critical">Step 3: Set Environment Variables (CRITICAL)<a class="anchor" aria-label="anchor" href="#step-3-set-environment-variables-critical"></a></h4>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># ESSENTIAL: Set clipboard environment variable to prevent crashes</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="bu">export</span> <span class="va">CLIPR_ALLOW</span><span class="op">=</span>TRUE</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-4-test-reprex-with-simple-example">Step 4: Test reprex with Simple Example<a class="anchor" aria-label="anchor" href="#step-4-test-reprex-with-simple-example"></a></h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="bu">export</span> <span class="va">CLIPR_ALLOW</span><span class="op">=</span>TRUE <span class="kw">&amp;&amp;</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="st">library(reprex)</span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a><span class="st"># Test basic functionality</span></span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="st">result &lt;- reprex({</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="st">  x &lt;- 1:5</span></span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="st">  mean(x)</span></span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a><span class="st">}, venue = "gh", advertise = FALSE, html_preview = FALSE)</span></span>
<span id="cb47-9"><a href="#cb47-9" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" tabindex="-1"></a><span class="st">cat("SUCCESS: Basic reprex working\n")</span></span>
<span id="cb47-11"><a href="#cb47-11" tabindex="-1"></a><span class="st">cat(result, sep = "\n")</span></span>
<span id="cb47-12"><a href="#cb47-12" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-5-test-reprex-with-rempsyc-functions">Step 5: Test reprex with rempsyc Functions<a class="anchor" aria-label="anchor" href="#step-5-test-reprex-with-rempsyc-functions"></a></h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="bu">export</span> <span class="va">CLIPR_ALLOW</span><span class="op">=</span>TRUE <span class="kw">&amp;&amp;</span> <span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="st">library(reprex)</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="st"># Working reprex example with rempsyc</span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="st">result &lt;- reprex({</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="st">  library(rempsyc)</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a><span class="st">  # Example with extract_duplicates function</span></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a><span class="st">  df1 &lt;- data.frame(</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a><span class="st">    id = c(1, 2, 3, 1, 3),</span></span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a><span class="st">    score = c(NA, 85, 92, 88, 95)</span></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a><span class="st">  print("Original data:")</span></span>
<span id="cb48-15"><a href="#cb48-15" tabindex="-1"></a><span class="st">  print(df1)</span></span>
<span id="cb48-16"><a href="#cb48-16" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb48-17"><a href="#cb48-17" tabindex="-1"></a><span class="st">  duplicates &lt;- extract_duplicates(df1, id = "id")</span></span>
<span id="cb48-18"><a href="#cb48-18" tabindex="-1"></a><span class="st">  print("Duplicates found:")</span></span>
<span id="cb48-19"><a href="#cb48-19" tabindex="-1"></a><span class="st">  print(duplicates)</span></span>
<span id="cb48-20"><a href="#cb48-20" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb48-21"><a href="#cb48-21" tabindex="-1"></a><span class="st">}, venue = "gh", advertise = FALSE, html_preview = FALSE)</span></span>
<span id="cb48-22"><a href="#cb48-22" tabindex="-1"></a></span>
<span id="cb48-23"><a href="#cb48-23" tabindex="-1"></a><span class="st">cat("SUCCESS: rempsyc reprex working\n")</span></span>
<span id="cb48-24"><a href="#cb48-24" tabindex="-1"></a><span class="st">cat(result, sep = "\n")</span></span>
<span id="cb48-25"><a href="#cb48-25" tabindex="-1"></a><span class="st">'</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="common-error-solutions">Common Error Solutions:<a class="anchor" aria-label="anchor" href="#common-error-solutions"></a></h4>
<p><strong>Error: “This reprex appears to crash R”</strong> - <strong>Cause</strong>: CLIPR_ALLOW not set or missing dependencies - <strong>Solution</strong>: Set <code>export CLIPR_ALLOW=TRUE</code> and install pandoc, knitr, rmarkdown</p>
<p><strong>Error: “CLIPR_ALLOW has not been set”</strong> - <strong>Cause</strong>: Missing environment variable - <strong>Solution</strong>: Always run <code>export CLIPR_ALLOW=TRUE</code> before using reprex</p>
<p><strong>Plot Rendering Issues</strong> - <strong>Cause</strong>: Complex ggplot objects cause crashes in reprex rendering - <strong>Solution</strong>: For plots, keep examples simple or use <code>ggsave()</code> to save plots separately - <strong>Workaround</strong>: Document plot creation without displaying the plot object in reprex</p>
</div>
<div class="section level4">
<h4 id="verified-working-example-template">Verified Working Example Template<a class="anchor" aria-label="anchor" href="#verified-working-example-template"></a></h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="co"># ALWAYS use this pattern for rempsyc reprex:</span></span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a>export CLIPR_ALLOW<span class="ot">=</span><span class="cn">TRUE</span></span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a><span class="fu">library</span>(reprex)</span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">reprex</span>({</span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a>  <span class="fu">library</span>(rempsyc)</span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a>  </span>
<span id="cb49-8"><a href="#cb49-8" tabindex="-1"></a>  <span class="co"># Your rempsyc example here</span></span>
<span id="cb49-9"><a href="#cb49-9" tabindex="-1"></a>  <span class="co"># Keep it simple, avoid complex plots in reprex</span></span>
<span id="cb49-10"><a href="#cb49-10" tabindex="-1"></a>  </span>
<span id="cb49-11"><a href="#cb49-11" tabindex="-1"></a>}, <span class="at">venue =</span> <span class="st">"gh"</span>, <span class="at">advertise =</span> <span class="cn">FALSE</span>, <span class="at">html_preview =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="common-reference-information">Common Reference Information<a class="anchor" aria-label="anchor" href="#common-reference-information"></a></h2>
<p>The following are outputs from frequently used commands. Reference them instead of running bash commands to save time.</p>
<div class="section level3">
<h3 id="repository-root-structure">Repository Root Structure<a class="anchor" aria-label="anchor" href="#repository-root-structure"></a></h3>
<pre><code>ls -la /home/runner/work/rempsyc/rempsyc/

.Rbuildignore       - Files to exclude from package build
.github/            - GitHub workflows and actions
.gitignore          - Git ignore patterns
CITATION.cff        - Citation metadata
DESCRIPTION         - Package metadata and dependencies
LICENSE.md          - Package license (GPL 3+)
NAMESPACE           - Package exports (auto-generated)
NEWS.md             - Change log
R/                  - R source code (34+ files)
README.Rmd          - Source for README (edit this, not README.md)
README.md           - Main repository documentation
TODOS.md            - Development roadmap
cran-comments.md    - CRAN submission notes
docs/               - pkgdown documentation site
inst/               - Package installation files
man/                - Help documentation (auto-generated)
tests/              - Test files (testthat framework)
vignettes/          - R Markdown tutorials</code></pre>
</div>
<div class="section level3">
<h3 id="core-r-functions-by-file">Core R Functions by File<a class="anchor" aria-label="anchor" href="#core-r-functions-by-file"></a></h3>
<pre><code>R/nice_t_test.R      - t-test analysis
R/nice_table.R       - APA formatted tables
R/nice_scatter.R     - Scatter plot visualization (uses .data[[var]] notation)
R/nice_violin.R      - Violin plot visualization
R/extract_duplicates.R - Data cleaning utilities
R/nice_na.R          - Missing data analysis
R/format_value.R     - Value formatting (p, r, d values)
R/scale_mad.R        - Robust standardization
R/global_variables.R - DEPRECATED: Do not add to this file</code></pre>
</div>
<div class="section level3">
<h3 id="code-quality-examples">Code Quality Examples<a class="anchor" aria-label="anchor" href="#code-quality-examples"></a></h3>
<div class="section level4">
<h4 id="correct-proper-variable-referencing">CORRECT: Proper Variable Referencing<a class="anchor" aria-label="anchor" href="#correct-proper-variable-referencing"></a></h4>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># In dplyr operations - USE .data[[var]] notation:</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">group</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">response</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># In ggplot operations - USE .data[[var]] notation:</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">predictor</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">response</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Always include proper imports:</span></span>
<span><span class="co">#' @importFrom dplyr group_by summarize</span></span>
<span><span class="co">#' @importFrom ggplot2 ggplot aes</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="incorrect-causes-ci-failures">INCORRECT: Causes CI Failures<a class="anchor" aria-label="anchor" href="#incorrect-causes-ci-failures"></a></h4>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DO NOT: Bare variable names (causes binding warnings)</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">response</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># DO NOT: Add to global_variables.R file</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/globalVariables.html" class="external-link">globalVariables</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group"</span>, <span class="st">"response"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="cicd-integration">CI/CD Integration<a class="anchor" aria-label="anchor" href="#cicd-integration"></a></h2>
<p>The package uses GitHub Actions with these workflows: - <strong>R-CMD-check</strong>: Multi-platform testing (Ubuntu, macOS, Windows)<br>
- <strong>lint</strong>: Code style checking with lintr - <strong>test-coverage</strong>: Code coverage reporting with covr - <strong>pkgdown</strong>: Documentation website generation</p>
<p>These workflows run automatically on pushes and pull requests to main/master branches.</p>
<div class="section level3">
<h3 id="ensuring-ci-workflows-pass-on-first-try">Ensuring CI Workflows Pass on First Try<a class="anchor" aria-label="anchor" href="#ensuring-ci-workflows-pass-on-first-try"></a></h3>
<p><strong>CRITICAL</strong>: Follow these guidelines to prevent CI failures:</p>
<div class="section level4">
<h4 id="id_1-global-variable-binding-prevention">1. Global Variable Binding Prevention<a class="anchor" aria-label="anchor" href="#id_1-global-variable-binding-prevention"></a></h4>
<ul><li>
<strong>Always</strong> use <code>.data[[variable_name]]</code> in dplyr operations</li>
<li>
<strong>Always</strong> add <code>@importFrom package function</code> for external functions</li>
<li>
<strong>Never</strong> create <code>global_variables.R</code> files with <code><a href="https://rdrr.io/r/utils/globalVariables.html" class="external-link">utils::globalVariables()</a></code>
</li>
<li>
<strong>Test locally</strong>: <code>R CMD check</code> should show no “no visible binding” warnings</li>
</ul></div>
<div class="section level4">
<h4 id="id_2-documentation-consistency-validation">2. Documentation Consistency Validation<a class="anchor" aria-label="anchor" href="#id_2-documentation-consistency-validation"></a></h4>
<ul><li>
<strong>Always</strong> ensure parameter names in <code>@param</code> match function arguments exactly</li>
<li>
<strong>Always</strong> run <code>roxygen2::document()</code> after changing function signatures</li>
<li>
<strong>Test locally</strong>: Look for “Codoc mismatches” warnings during build</li>
</ul></div>
<div class="section level4">
<h4 id="id_3-package-installation-strategy">3. Package Installation Strategy<a class="anchor" aria-label="anchor" href="#id_3-package-installation-strategy"></a></h4>
<p>When packages can’t be installed from CRAN: - <strong>Primary</strong>: Use system packages via <code>sudo apt install r-cran-[package]</code> - <strong>Alternative</strong>: Use R-universe repository: <code>repos="https://r-universe.dev"</code> - <strong>Advanced</strong>: Use pak package for better dependency resolution</p>
</div>
<div class="section level4">
<h4 id="id_4-pre-commit-validation-checklist">4. Pre-Commit Validation Checklist<a class="anchor" aria-label="anchor" href="#id_4-pre-commit-validation-checklist"></a></h4>
<p>Before making any PR, verify locally:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="co"># Must show ZERO "no visible binding" warnings:</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="ex">R</span> CMD check rempsyc_<span class="pp">*</span>.tar.gz <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">"binding"</span></span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a><span class="co"># Must show ZERO "Codoc mismatches" warnings:  </span></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="ex">R</span> CMD check rempsyc_<span class="pp">*</span>.tar.gz <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">"codoc"</span></span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a><span class="co"># All tests must pass (94+ passing tests expected):</span></span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-restore</span> <span class="at">--no-save</span> <span class="at">-e</span> <span class="st">'library(testthat); library(rempsyc); test_local()'</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_5-pr-description-requirements">5. PR Description Requirements<a class="anchor" aria-label="anchor" href="#id_5-pr-description-requirements"></a></h4>
<p><strong>CRITICAL</strong>: Always include reprexes in PR descriptions to demonstrate code changes:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create examples showing before/after behavior:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rempsyc.remi-theriault.com">rempsyc</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># BEFORE (if modifying existing function):</span></span>
<span><span class="co"># [show current behavior]</span></span>
<span></span>
<span><span class="co"># AFTER (with your changes):</span></span>
<span><span class="co"># [show improved behavior]</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="performance-notes">Performance Notes<a class="anchor" aria-label="anchor" href="#performance-notes"></a></h2>
<ul><li>Package build: ~19 seconds</li>
<li>Package install: ~3 seconds<br></li>
<li>Test suite: ~11 seconds (99 tests: 94 pass, 5 snapshot failures expected)</li>
<li>Linting: ~20 seconds (673 style issues - normal for existing codebase)</li>
<li>Code styling: ~10-30 seconds depending on package size</li>
<li>Documentation update: ~5-15 seconds (roxygen2)</li>
<li>R CMD check: ~29 seconds (without suggested packages), 2-5 minutes (full check)</li>
<li>Function loading after install: Near instant</li>
<li>
<strong>Package installation</strong>: 1-5 seconds per package (targeted) vs 2-10 minutes (batch installation of all suggested packages)</li>
<li>
<strong>Pre-configured environment setup</strong>: ~2-3 minutes (core tools only) vs ~5-10 minutes (with all suggested packages)</li>
</ul><p><strong>CRITICAL</strong>: Never cancel builds or tests prematurely. Always wait for completion and set appropriate timeouts (60+ seconds for builds, 30+ seconds for tests, 10+ minutes for R CMD check).</p>
<p><strong>PACKAGE INSTALLATION</strong>: Use targeted installation (install only what the specific function needs) to avoid “The package installation is taking a long time” messages. The pre-configured environment installs only core development packages (~2-3 minutes); installing additional suggested packages takes 1-5 seconds each when needed, vs 2-10 minutes for all 22+ suggested packages at once.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://remi-theriault.com" class="external-link">Rémi Thériault</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

